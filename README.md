# Flight Filtering

Тестовое задание №1: модуль фильтрации авиаперелётов.

## Условие задачи

Имеется система, которая обрабатывает авиаперелёты.  
Перелёт состоит из одного или нескольких сегментов (каждый сегмент — атомарный перелёт с датой/временем вылета и прилёта).

Необходимо написать модуль, который фильтрует набор перелётов по различным правилам.

### Требования:
- Исключить перелёты с вылетом до текущего момента времени.
- Исключить сегменты, где дата прилёта раньше даты вылета.
- Исключить перелёты, где общее время на земле между сегментами превышает 2 часа.

## Структура проекта

```
src/main/java/com/gridnine/testing
│
├── app
│   └── Main.java                # Точка входа, демонстрация работы фильтров
│
├── builder
│   └── FlightBuilder.java       # Фабрика тестовых перелётов
│
├── filter
│   ├── FlightFilter.java        # Интерфейс фильтра
│   ├── AbstractFlightFilter.java# Базовый класс с общей логикой
│   ├── DepartureBeforeNowFilter.java
│   ├── ArrivalBeforeDepartureFilter.java
│   └── GroundTimeExceedsTwoHoursFilter.java
│
└── model
    ├── Flight.java              # Класс перелёта
    └── Segment.java             # Класс сегмента
```

## Запуск

1. Собрать проект (Maven/Gradle или через IDE).
2. Запустить класс `Main`.
3. В консоли появятся:
    - Все перелёты из `FlightBuilder.createFlights()`;
    - Результаты фильтрации по каждому правилу.

## Пример вывода в консоль

```
Все перелеты:
[2025-10-03T15:37|2025-10-03T17:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T18:37|2025-10-03T20:37]
[2025-09-27T15:37|2025-10-03T15:37]
[2025-10-03T15:37|2025-10-03T09:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T20:37|2025-10-03T21:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T18:37|2025-10-03T19:37] [2025-10-03T21:37|2025-10-03T22:37]

--- Фильтр 1: DepartureBeforeNowFilter (убираем вылеты до текущего момента)
[2025-10-03T15:37|2025-10-03T17:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T18:37|2025-10-03T20:37]
[2025-10-03T15:37|2025-10-03T09:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T20:37|2025-10-03T21:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T18:37|2025-10-03T19:37] [2025-10-03T21:37|2025-10-03T22:37]

--- Фильтр 2: ArrivalBeforeDepartureFilter (убираем сегменты с прилётом раньше вылета)
[2025-10-03T15:37|2025-10-03T17:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T18:37|2025-10-03T20:37]
[2025-09-27T15:37|2025-10-03T15:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T20:37|2025-10-03T21:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T18:37|2025-10-03T19:37] [2025-10-03T21:37|2025-10-03T22:37]

--- Фильтр 3: GroundTimeExceedsTwoHoursFilter (убираем перелёты с пересадками более 2 часов)
[2025-10-03T15:37|2025-10-03T17:37]
[2025-10-03T15:37|2025-10-03T17:37] [2025-10-03T18:37|2025-10-03T20:37]
[2025-09-27T15:37|2025-10-03T15:37]
[2025-10-03T15:37|2025-10-03T09:37]
```

## Реализация

- Фильтры реализованы через общий интерфейс `FlightFilter`.
- Общая логика вынесена в абстрактный класс `AbstractFlightFilter`.
- Каждый фильтр реализует только свою бизнес-логику (`isValid`).
- Тестовые данные генерируются фабрикой `FlightBuilder`.

## Тесты

Проект покрыт юнит- и интеграционными тестами на JUnit5:

- `DepartureBeforeNowFilterTest` — проверяет исключение перелётов с вылетом в прошлом.
- `ArrivalBeforeDepartureFilterTest` — проверяет исключение сегментов, где прилёт раньше вылета.
- `GroundTimeExceedsTwoHoursFilterTest` — проверяет исключение перелётов с пересадками более 2 часов.
- `FlightTest` — проверяет корректность метода `getTotalGroundTimeMinutes`.
- `FlightFilterIntegrationTest` — проверяет работу цепочки фильтров на тестовых данных.

## Запуск

### Вариант 1. Maven
# Сборка проекта
mvn clean package

# Запуск приложения
mvn exec:java -Dexec.mainClass="com.gridnine.testing.app.Main"

# Запуск всех тестов
mvn test

### Вариант 2. Gradle
# Сборка проекта
./gradlew build

# Запуск приложения
./gradlew run

# Запуск всех тестов
./gradlew test


Автор: Alex
